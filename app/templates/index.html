{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow">
    <h2 class="text-2xl font-bold mb-6 text-center">Shorten Your URL</h2>
    
    <form id="url-form" class="space-y-4">
        <div>
            <label for="url" class="block text-sm font-medium text-gray-700">URL to shorten</label>
            <input 
                type="url" 
                id="url" 
                name="url"
                required
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                placeholder="https://example.com"
            >
            <div id="url-error" class="mt-1 text-sm text-red-600 hidden"></div>
        </div>

        <div>
            <label for="custom-code" class="block text-sm font-medium text-gray-700">Custom code (optional)</label>
            <input 
                type="text" 
                id="custom-code" 
                name="custom_code"
                pattern="[a-zA-Z0-9-]{4,20}"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                placeholder="my-custom-link"
            >
            <div id="code-error" class="mt-1 text-sm text-red-600 hidden"></div>
        </div>

        <div>
            <button 
                type="submit"
                id="submit-btn"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
                Shorten URL
            </button>
            <div id="loading" class="mt-2 text-center hidden">
                <div class="inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"></div>
            </div>
        </div>
    </form>

    <div id="result" class="mt-6 p-4 bg-blue-50 rounded-md hidden">
        <p class="font-medium">Your shortened URL:</p>
        <a id="short-url" href="#" class="text-blue-600 break-all"></a>
        <button 
            id="copy-btn"
            class="mt-2 px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded hover:bg-blue-200"
        >
            Copy to clipboard
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="../static/js/form.js"></script>
{% endblock %}
